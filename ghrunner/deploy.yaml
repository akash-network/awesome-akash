---
version: "2.0"
services:
  ghrunner:
    image: ghcr.io/myoung34/docker-github-actions-runner:2.330.0-ubuntu-noble # https://github.com/myoung34/docker-github-actions-runner/pkgs/container/docker-github-actions-runner
    expose:
      - port: 80
        as: 80
        to:
          - global: true
    env:
      - REPO_URL=https://github.com/<org>/<repo>
      - RUNNER_TOKEN=https://github.com/<org>/<repo>/settings/actions/runners/new
      - RUNNER_NAME=ghrunner
profiles:
  compute:
    ghrunner:
      resources:
        cpu:
          units: 1
        memory:
          size: 2gb
        storage:
          - size: 10gb
  placement:
    dcloud:
      pricing:
        ghrunner:
          denom: uakt
          amount: 100000
deployment:
  ghrunner:
    dcloud:
      profile: ghrunner
      count: 1
