---
version: "2.0"

services:
  monero-pool:
    image: ghcr.io/ubunteroz/monero-pool:0.17-4
    expose:
      # Mining pool port
      - port: 4242
        as: 4242
        to:
          - global: true
      # monero-pool web UI
      - port: 4243
        as: 80
        to:
          - global: true
      # monerod restricted RPC
      - port: 28092
        as: 28092
        to:
          - global: true
    env:
      - MONERO_ARGS=<additional monerod arguments>
      - MONERO_WALLET_ARGS=<additional monero-wallet-rpc arguments>
      - POOL_WALLET=<pool wallet address>
      - POOL_WALLET_SEED=<pool wallet address mnemonic seed>
      - FEE_WALLET=<fee wallet address>
      - POOL_FEE=<set pool fee percentage in decimal>
      - PAYMENT_THRESHOLD=<set minimum payout in XMR>
profiles:
  compute:
    monero-pool-profile:
      resources:
        cpu:
          units: 8.0
        memory:
          size:  16Gi
        storage:
          size:  100Gi
  placement:
    akash:
      attributes:
        host: akash
      signedBy:
        anyOf:
          - "akash1365yvmc4s7awdyj3n2sav7xfx76adc6dnmlx63"
      pricing:
        monero-pool-profile:
          denom: uakt
          amount: 1000
deployment:
  monero-pool:
    akash:
      profile: monero-pool-profile
      count: 1
